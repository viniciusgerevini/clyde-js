(this["webpackJsonpclyde-editor"]=this["webpackJsonpclyde-editor"]||[]).push([[0],{47:function(e,t,n){},48:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var i,a=n(1),o=n.n(a),r=n(20),c=n.n(r),l=(n(47),n(48),n(3)),s=n(7),d=n(6),u=n(23),b=n(36),h=n.n(b),g=n(10),j=n(2),x=Object(d.b)("editor/interface/toggle_editor"),p=Object(d.b)("editor/interface/toggle_intepreter"),f=Object(d.b)("editor/interface/change_interpreter_split_direction");var O,v=Object(d.c)({isEditorEnabled:!0,isInterpreterEnabled:!0,interpreterSplitDirection:"vertical"},(i={},Object(j.a)(i,x,(function(e,t){return e.isEditorEnabled=t.payload.state,e})),Object(j.a)(i,p,(function(e,t){return e.isInterpreterEnabled=t.payload.state,e})),Object(j.a)(i,f,(function(e,t){return e.interpreterSplitDirection=t.payload.direction,e})),i)),m=Object(d.b)("editor/editor/set_document_content"),y=Object(d.b)("editor/editor/update_preference");var k,w=Object(d.c)({currentValue:"",preferences:{theme:"dracula",fontSize:16,tabSize:4,highlightActiveLine:!1,lineWrap:!1,useSoftTabs:!0,showInvisibles:!1,scrollPastEnd:!1,vimMode:!1}},(O={},Object(j.a)(O,m,(function(e,t){return e.currentValue=t.payload,e})),Object(j.a)(O,y,(function(e,t){return e.preferences[t.payload.name]=t.payload.value,e})),O)),S=n(12),E=Object(d.b)("editor/interpreter/set_dialogue_block"),D=Object(d.b)("editor/interpreter/add_dialogue_line"),P=Object(d.b)("editor/interpreter/clear_timeline"),C=Object(d.b)("editor/interpreter/show_metadata"),B=Object(d.b)("editor/interpreter/hide_metadata"),_=Object(d.b)("editor/interpreter/show_debug_pane"),T=Object(d.b)("editor/interpreter/hide_debug_pane"),M=Object(d.b)("editor/interpreter/enable_single_bubble_dialogue"),I=Object(d.b)("editor/interpreter/disable_single_bubble_dialogue"),z=Object(d.b)("editor/interpreter/choose_option"),N=Object(d.b)("editor/interpreter/notify_event"),A=Object(d.b)("editor/interpreter/clear_events");var L,V,G,H,R=Object(d.c)({currentBlock:void 0,timeline:[],shouldShowExtraMetadata:!1,shouldShowDebugPane:!1,singleBubblePresentation:!1,document:void 0,events:[]},(k={},Object(j.a)(k,E,(function(e,t){return e.currentBlock=t.payload,e})),Object(j.a)(k,D,(function(e,t){return e.timeline=[].concat(Object(S.a)(e.timeline),[t.payload]),e})),Object(j.a)(k,P,(function(e,t){return e.timeline=[],e})),Object(j.a)(k,C,(function(e){return e.shouldShowExtraMetadata=!0,e})),Object(j.a)(k,B,(function(e){return e.shouldShowExtraMetadata=!1,e})),Object(j.a)(k,_,(function(e){return e.shouldShowDebugPane=!0,e})),Object(j.a)(k,T,(function(e){return e.shouldShowDebugPane=!1,e})),Object(j.a)(k,M,(function(e){return e.singleBubblePresentation=!0,e})),Object(j.a)(k,I,(function(e){return e.singleBubblePresentation=!1,e})),Object(j.a)(k,z,(function(e,t){return e.timeline.length&&"options"===e.timeline[e.timeline.length-1].type?(e.timeline[e.timeline.length-1].selected=t.payload,e):e})),Object(j.a)(k,N,(function(e,t){return e.events=[].concat(Object(S.a)(e.events),[t.payload]),e})),Object(j.a)(k,A,(function(e,t){return e.events=[],e})),k)),F=Object(g.b)({interfaceConfig:v,editor:w,interpreter:R}),W=n(13),$=n(4),Z=n(9),U=n(8),q=n(0),J=$.a.div(L||(L=Object(l.a)(["\n  display: flex;\n  align-items: stretch;\n  flex-grow: 1;\n  height: auto;\n  flex-direction: ",";\n  max-height: 100%;\n"])),(function(e){return"horizontal"===e.direction?"column":"row"})),Y=$.a.div(V||(V=Object(l.a)(["\n  background-color: #eee;\n  background-repeat: no-repeat;\n  background-position: 50%;\n  flex-basis: ","px;\n  cursor: ",";\n"])),4,(function(e){return"horizontal"===e.direction?"row-resize":"col-resize"}));function K(e){var t=e.direction,n=void 0===t?"vertical":t,i=e.defaultSizes,a=e.style,r=Array.isArray(e.children)?e.children:[e.children],c=r.filter((function(e){return e&&""!==e})),l=function(){if(1===c.length)return["100%"];if(i){var e=i.map((function(e){return"calc(".concat(e,"% - 2px)")}));if(i.length===c.length)return e;var t=c.reduce((function(e,t){var n=r.indexOf(t);return e+i[n]}),0);if(t<100){var n=r.indexOf(c[c.length-1]);e[n]="calc(".concat(i[n]+(100-t),"% - 2px)")}return e}var a=Math.floor(100/c.length);return Array(r.length).fill("calc(".concat(a,"% - 2px)"))}(),s=r.reduce((function(e,t,i){if(!t)return e;var a=c.indexOf(t);return a>0&&a<c.length&&e.push(Object(q.jsx)(Y,{direction:n})),e.push(o.a.cloneElement(t,{key:i,style:{flexBasis:l[i],flexGrow:1}})),e}),[]);return Object(q.jsx)(J,{direction:n,style:a,children:s.map((function(e,t){return o.a.cloneElement(e,{key:t})}))})}var Q=$.a.div(G||(G=Object(l.a)(["\n  position: absolute;\n  display: 'flex';\n  flex-direction: column;\n  width: auto;\n  min-width: 230px;\n  z-index: 9999;\n  background-color: #fff;\n  font-size: 1rem;\n  padding: 10px 0px;\n  border: 1px solid #eee;\n  border-radius: 5px;\n"]))),X=$.a.div(H||(H=Object(l.a)(["\n  padding: 6px 15px;\n  display: flex;\n  flex-direction: row;\n\n  &:hover {\n    background-color: #eee;\n  }\n\n  > svg {\n    flex-basis: 30px;\n    margin-right: 5px;\n  }\n"])));function ee(e){var t=e.children,n=e.onClick,i=e.style;return Object(q.jsx)(Q,{onClick:n,style:i,children:o.a.Children.toArray(t)})}function te(e){var t=e.label,n=e.icon,i=e.onClick,a=e.text;return Object(q.jsxs)(X,{"aria-label":t,onClick:i,children:[Object(q.jsx)(Z.a,{icon:n})," ",a]})}var ne=n(15),ie=n(40),ae=n.n(ie),oe=n(41);n(72),n(73),n(74),n(75),n(76),n(77);function re(){var e=[{token:"constant.language.boolean",regex:/(true|false)/},{token:"constant.numeric",regex:/[0-9,.]+/},{token:"constant.string",regex:/(".*")/}],t=[{token:"keyword.operator",regex:/(isnt|ISNT)/},{token:"keyword.operator",regex:/(and|or|not|is|AND|OR|NOT|IS)/},{token:"keyword.operator",regex:/(&&|\|\||<=|>=|==|!=)/},{token:"keyword.operator",regex:/(\*|\+|-|\^|\/|%|<|>|!)/}],n=[{token:"keyword",regex:/(\})/,next:"start"}],i=[{token:"support.constant",regex:/OPTIONS_COUNT/}],a=[{token:"identifier",regex:/[a-zA-Z_][a-zA-Z0-9_]+/}];this.$rules={start:[{token:"comment",regex:/^\s*--.*$/},{token:["keyword","text","variable"],regex:/^(==)(\s*)([a-zA-Z0-9_ ]+)$/},{token:["text","keyword","text","support.constant"],regex:/(\s*)(->)(\s*)(END)$/},{token:["text","keyword","text","variable"],regex:/(\s*)(->)(\s*)([a-zA-Z0-9_ ]+)/},{token:["text","keyword","text"],regex:/(\s*)(<-)(\s*)/},{token:["text","keyword","text","support.constant"],regex:/^(\s*)(\()(\s*)((?:shuffle|once|sequence|shuffle once|shuffle sequence)*)$/},{token:["text","keyword"],regex:/^(\s*)(\))$/},{token:"keyword.control",regex:/^(\s*[*+>])/},{token:"keyword",regex:/(\{)/,next:"logicBlock"},{token:"constant.string",regex:/#[a-zA-Z0-9_]+/},{token:["variable","text","variable"],regex:/((?:\s*[a-zA-Z0-9_] +:)?\s*)(".*")((?:\$[a-zA-Z0-9_]+)?)/},{token:["variable","text","variable"],regex:/((?:\s*[a-zA-Z0-9_ ]+:)?\s*)([^\r\n#${]+)((?:\$[a-zA-Z0-9_]+)?)/}],logicBlock:[{token:"keyword.control",regex:/(set)/,next:"assignmentBlock"},{token:"keyword.control",regex:/(trigger)/,next:"eventBlock"},{token:"keyword.control",regex:/(when)/}].concat(i,t,e,a,n),assignmentBlock:[].concat(i,t,[{token:"keyword.operator",regex:/(\+=|-=|\*=|\/=|%=|\^=)/},{token:"keyword.operator",regex:/(=)/}],e,a,n),eventBlock:[].concat(a,n)},this.normalizeRules()}var ce,le=["defaultValue","setDocumentContent","notifyChange","preferences"],se=$.a.div(ce||(ce=Object(l.a)(["\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n"]))),de={theme:"dracula",fontSize:16,tabSize:4,highlightActiveLine:!1,lineWrap:!1,useSoftTabs:!0,showInvisibles:!1,scrollPastEnd:!1};function ue(e){var t=e.defaultValue,n=e.setDocumentContent,i=e.notifyChange,a=e.preferences,o=void 0===a?de:a,r=Object(ne.a)(e,le),c=Object(oe.a)(),l=c.ref,d=c.width,u=void 0===d?500:d,b=c.height,h=void 0===b?500:b;return Object(q.jsx)(se,Object(s.a)(Object(s.a)({ref:l},r),{},{"aria-label":"Text editor",children:Object(q.jsx)(ae.a,{defaultValue:t,mode:"clyde",theme:o.theme,onBeforeLoad:function(e){var t;(t=e).define("ace/mode/clyde_highlight_rules",["require","exports","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t){var n=e("ace/lib/oop"),i=e("ace/mode/text_highlight_rules").TextHighlightRules;n.inherits(re,i),t.ClydeHighlightRules=re})),t.define("ace/mode/clyde",["require","exports","ace/lib/oop","ace/mode/text","ace/mode/clyde_highlight_rules"],(function(e,t){var n=e("ace/lib/oop"),i=e("ace/mode/text").Mode,a=e("ace/mode/clyde_highlight_rules").ClydeHighlightRules,o=function(){this.$id="ace/mode/clyde",this.HighlightRules=a,this.lineCommentStart="--",this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t),a=this.getTokenizer().getLineTokens(t,e).tokens;return a.length&&"comment"===a[a.length-1].type||"start"===e&&t.match(/^\s*(\(|\*|\+)/)&&(i+=n),i}};n.inherits(o,i),t.Mode=o}))},onChange:function(e){n(e),e!==t&&i({text:"<DIALOGUE_CHANGED>"})},name:"mainEditor",width:"".concat(u,"px"),height:"".concat(h,"px"),editorProps:{$blockScrolling:!0},fontSize:o.fontSize,tabSize:o.tabSize,debounceChangePeriod:1e3,keyboardHandler:o.vimMode?"vim":void 0,highlightActiveLine:o.highlightActiveLine,setOptions:{showPrintMargin:!1,wrapBehavioursEnabled:o.lineWrap,wrap:o.lineWrap,useSoftTabs:o.useSoftTabs,showInvisibles:o.showInvisibles,scrollPastEnd:o.scrollPastEnd,navigateWithinSoftTabs:!0}})}))}var be,he,ge,je,xe,pe,fe,Oe,ve,me,ye=n(42),ke=n(26),we=$.a.div(be||(be=Object(l.a)(["\n  text-align: center;\n  width: auto;\n  background-color: #eeeeee;\n  margin: 10px 10px;\n  padding: 10px 20px;\n  border-radius: 5px;\n  cursor: default;\n"]))),Se=$.a.div(he||(he=Object(l.a)(["\n  text-align: center;\n  width: auto;\n  background-color: #ffeeee;\n  margin: 10px 10px;\n  padding: 30px 20px;\n  border-radius: 5px;\n  cursor: default;\n  font-weight: 500;\n  display: flex;\n  justify-content: center;\n  white-space: pre-line;\n  line-height: 26px;\n"]))),Ee=$.a.div(ge||(ge=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  color: #444;\n  padding: 0px 10px;\n  height: 40px;\n\n  > svg {\n    cursor: pointer;\n    font-size: 1.5em;\n    margin: 0px 20px;\n    &:hover {\n      color: #555;\n    }\n  }\n"]))),De=$.a.span(je||(je=Object(l.a)(["\n  cursor: pointer;\n  position: relative;\n  margin: 0px 20px;\n  > svg {\n    font-size: 1.5em;\n    &:hover {\n      color: #222;\n    }\n  }\n"])));function Pe(e){var t=e.doc,n=e.currentBlock,i=e.shouldShowExtraMetadata,o=e.shouldShowDebugPane,r=e.singleBubblePresentation,c=e.setBlock,l=e.clearTimeline,s=e.showExtraMetadata,d=e.hideExtraMetadata,u=e.showDebugPane,b=e.hideDebugPane,h=e.enableSingleBubbleDialogue,g=e.disableSingleBubbleDialogue,j=e.dialogue,x=e.addDialogueLine,p=e.chooseOption,f=e.clearEvents,O=Object(a.useState)(!1),v=Object(W.a)(O,2),m=v[0],y=v[1],k=function(){y(!m)},w=function e(){var t=j.getContent();return x(t),t&&"options"!==t.type?e():t};return Object(q.jsxs)(Ee,{children:[Object(q.jsx)(Ce,{document:t,currentBlock:n,onBlockSelected:function(e){c(e),l(),j.start(e)}}),Object(q.jsx)(Z.a,{icon:U.l,title:"Restart dialogue",onClick:function(){j.start(n),l()}}),Object(q.jsx)(Z.a,{icon:U.h,title:"Forward untill next choice",onClick:w}),Object(q.jsx)(Z.a,{icon:U.i,title:"Execute Poltergeist mode (auto anwser)",onClick:function e(){var t=w();if(t){var n=Math.floor(Math.random()*t.options.length);p(n),j.choose(n),e()}}}),Object(q.jsx)(Z.a,{icon:U.j,title:"Clear memory",onClick:function(){j.clearData(),x({type:"INTERPRETER_INFO",text:"Memory cleared"}),j.start(n),f(),l()}}),Object(q.jsx)(Z.a,{icon:r?U.f:U.e,title:"Set ".concat(r?"multi":"single"," bubble dialogue"),onClick:function(){r?g():h()}}),Object(q.jsxs)(De,{children:[Object(q.jsx)(Z.a,{icon:U.c,onClick:k,title:"Interpreter options"}),m?Object(q.jsxs)(ee,{onClick:k,style:{width:"280px"},children:[Object(q.jsx)(te,{label:"Toggle extra metadata",onClick:function(){i?d():s()},icon:U.k,text:"".concat(i?"Hide":"Show"," metadata")}),Object(q.jsx)(te,{label:"Toggle debug pane",onClick:function(){o?b():u()},icon:U.a,text:"".concat(o?"Hide":"Show"," debug pane")})]}):""]})]})}function Ce(e){var t=e.document,n=e.currentBlock,i=e.onBlockSelected,a=[].concat(Object(S.a)(t.content.length>0?["default"]:[]),Object(S.a)(t.blocks.map((function(e){return e.name}))));return Object(q.jsx)("div",{children:Object(q.jsx)("select",{value:n,onChange:function(e){"default"!==e.target.value?i(e.target.value):i()},"aria-label":"Block selector",children:a.map((function(e,t){return Object(q.jsx)("option",{value:e,children:e},t)}))})})}var Be,_e=$.a.div(xe||(xe=Object(l.a)(["\n  width: auto;\n  background-color: #fff5da;\n  color: #34383c;\n  margin: 10px 10px;\n  padding: 10px 20px;\n  border-radius: 5px;\n  cursor: default;\n  position: relative;\n"]))),Te=$.a.div(pe||(pe=Object(l.a)(["\n"]))),Me=$.a.div(fe||(fe=Object(l.a)(["\n  margin-bottom: 5px;\n  font-weight: 500;\n"]))),Ie=$.a.ol(Oe||(Oe=Object(l.a)(["\n  margin-left: 10px;\n  list-style-type: decimal;\n  list-style-position: inside;\n"]))),ze=$.a.li(ve||(ve=Object(l.a)(["\n  position: relative;\n  opacity: ",";\n  ","\n  cursor: ",";\n  margin: 4px;\n\n  > span:hover {\n    ","\n  }\n"])),(function(e){return void 0!==e.optionSelected&&e.optionSelected!==e.index?.5:1}),(function(e){return e.optionSelected===e.index?"font-weight: 600;":""}),(function(e){return void 0===e.optionSelected?"pointer":"default"}),(function(e){return void 0!==e.optionSelected?"":"font-weight: 600;"})),Ne=$.a.span(me||(me=Object(l.a)(["\n  color: #444;\n  font-weight: normal;\n  background-color: rgba(245,235,208, 1);\n  opacity: 0.8;\n  border-radius: 5px;\n  padding-right: 10px;\n  margin-left: 10px;\n\n  label {\n    margin-left: 10px;\n    font-weight: 500;\n  }\n"])));function Ae(e){var t=e.line,n=e.onSelection,i=e.showMetadata;return void 0===t?Object(q.jsx)(we,{children:"DIALOGUE ENDED"}):"line"===t.type?Object(q.jsx)(Le,Object(s.a)(Object(s.a)({},t),{},{showMetadata:i})):"options"===t.type?Object(q.jsx)(Ve,Object(s.a)(Object(s.a)({},t),{},{onSelection:n,showMetadata:i})):Object(q.jsx)(we,{children:"<DIALOGUE_CHANGED>"===t.text?"DIALOGUE CHANGED":t.text})}function Le(e){var t=e.id,n=e.tags,i=e.speaker,a=e.text,o=e.showMetadata;return Object(q.jsxs)(_e,{children:[i?Object(q.jsx)(Me,{children:i}):void 0,Object(q.jsxs)(Te,{children:[a," ",Object(q.jsx)(Ge,{id:t,tags:n,isVisible:o})]})]})}function Ve(e){var t=e.id,n=e.tags,i=e.speaker,a=e.name,o=e.options,r=e.onSelection,c=e.selected,l=e.showMetadata;return Object(q.jsxs)(_e,{children:[i?Object(q.jsx)(Me,{children:i}):void 0,Object(q.jsxs)(Te,{children:[a," ",Object(q.jsx)(Ge,{id:t,tags:n,isVisible:l}),Object(q.jsx)(Ie,{children:o.map((function(e,t){return Object(q.jsx)(ze,{optionSelected:c,index:t,children:Object(q.jsxs)("span",{onClick:function(e){e.stopPropagation(),function(e){void 0===c&&r(e)}(t)},children:[e.label," ",Object(q.jsx)(Ge,Object(s.a)(Object(s.a)({},e),{},{isVisible:l}))]})},t)}))})]})]})}function Ge(e){var t=e.id,n=e.tags;return!e.isVisible||void 0===t&&void 0===n?Object(q.jsx)("span",{}):Object(q.jsxs)(Ne,{"aria-label":"metadata",children:[void 0!==t?Object(q.jsxs)("span",{"aria-label":"line id",children:[Object(q.jsx)("label",{children:"id:"})," ",t]}):void 0," ",void 0!==n?Object(q.jsxs)("span",{"aria-label":"line tags",children:[Object(q.jsx)("label",{children:"tags:"})," ",n.join(", ")]}):void 0]})}var He=$.a.div(Be||(Be=Object(l.a)(["\n  width: auto;\n  overflow: scroll;\n"])));function Re(e){var t=e.timeline,n=e.shouldShowExtraMetadata,i=e.singleBubblePresentation,o=e.addDialogueLine,r=e.style,c=e.dialogue,l=e.chooseOption,s=function(){var e=c.getContent();e&&"options"===e.type&&t.length>0&&"options"===t[t.length-1].type||(e||t[t.length-1])&&o(e)},d=function(e){c.choose(e),l(e),s()},u=Object(a.useRef)(null);return Object(a.useEffect)((function(){u.current.scrollIntoView({behavior:"smooth"})}),[t]),Object(q.jsxs)(He,{onClick:s,style:r,"aria-label":"Interpreter Dialogue Timeline",children:[t&&t.length?"":Object(q.jsx)(we,{children:"Dialogue not started. Click for next line."}),i?t.length?Object(q.jsx)(Ae,{line:t[t.length-1],onSelection:d,showMetadata:n}):void 0:t.filter((function(e,n){var i;return!(e&&"<DIALOGUE_CHANGED>"===e.text&&e.text===(null===(i=t[n-1])||void 0===i?void 0:i.text))})).map((function(e,t){return Object(q.jsx)(Ae,{line:e,onSelection:d,showMetadata:n},t)})),Object(q.jsx)("div",{ref:u})]})}var Fe,We,$e,Ze=["events","hideDebugPane"],Ue=$.a.div(Fe||(Fe=Object(l.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  overflow: scroll;\n"]))),qe=$.a.div(We||(We=Object(l.a)(["\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  cursor: pointer;\n"]))),Je=$.a.table($e||($e=Object(l.a)(["\n  width: 90%;\n  margin: 10px;\n\n  thead > tr > td {\n    font-weight: 500;\n    padding-bottom: 5px;\n  }\n\n  tbody {\n    > tr:nth-child(even) {\n      background-color: #f3f3f3;\n    }\n    td {\n      padding: 2px 0px;\n    }\n  }\n"])));function Ye(e){var t=e.events,n=e.hideDebugPane,i=Object(ne.a)(e,Ze),a=t.reduce((function(e,t){var n="".concat(t.type).concat(t.data.name),i=e[n];return i?(i.eventTime=t.eventTime,t.data.value&&(i.value=t.data.value),e):(e[n]={type:t.type,name:t.data.name,value:t.data.value,eventTime:t.eventTime},e)}),{}),o=function(e){var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()," ").concat(t.toLocaleTimeString())};return Object(q.jsxs)(Ue,Object(s.a)(Object(s.a)({"aria-label":"Debug pane"},i),{},{children:[Object(q.jsx)(qe,{children:Object(q.jsx)(Z.a,{icon:U.n,onClick:n,"aria-label":"Close debug pane"})}),Object(q.jsxs)(Je,{children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:"Type"}),Object(q.jsx)("td",{children:"Name"}),Object(q.jsx)("td",{children:"Value"}),Object(q.jsx)("td",{children:"Time"})]})}),Object(q.jsx)("tbody",{children:Object.keys(a).map((function(e){var t=a[e];return Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:t.type}),Object(q.jsx)("td",{children:t.name}),Object(q.jsx)("td",{children:void 0!==t.value?t.value.toString():void 0}),Object(q.jsx)("td",{children:o(t.eventTime)})]},e)}))})]})]}))}var Ke,Qe,Xe,et,tt,nt,it,at=["content","currentBlock","timeline","shouldShowExtraMetadata","shouldShowDebugPane","debugPaneDirection","singleBubblePresentation","clydeDocument","setBlock","addDialogueLine","clearTimeline","showExtraMetadata","hideExtraMetadata","showDebugPane","hideDebugPane","enableSingleBubbleDialogue","disableSingleBubbleDialogue","chooseOption","notifyEvent","clearEvents","events"],ot=$.a.div(Ke||(Ke=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"])));function rt(e){var t,n,i=e.content,o=e.currentBlock,r=e.timeline,c=e.shouldShowExtraMetadata,l=e.shouldShowDebugPane,d=e.debugPaneDirection,u=e.singleBubblePresentation,b=(e.clydeDocument,e.setBlock),h=e.addDialogueLine,g=e.clearTimeline,j=e.showExtraMetadata,x=e.hideExtraMetadata,p=e.showDebugPane,f=e.hideDebugPane,O=e.enableSingleBubbleDialogue,v=e.disableSingleBubbleDialogue,m=e.chooseOption,y=e.notifyEvent,k=e.clearEvents,w=e.events,S=Object(ne.a)(e,at),E=Object(a.useState)(""),D=Object(W.a)(E,2),P=D[0],C=D[1],B=Object(a.useState)(),_=Object(W.a)(B,2),T=_[0],M=_[1],I=T,z=function(e,t){y({type:e,data:t,eventTime:Date.now()})};try{t=Object(ke.a)("".concat(i||"")),I&&i===P||(C(i),I=Object(ye.a)(t),o&&(I.start(o),b(o)),M(I),I.on(I.events.VARIABLE_CHANGED,(function(e){z("variable",e)})),I.on(I.events.EVENT_TRIGGERED,(function(e){z("event",e)})))}catch(N){n=N.message,t=Object(ke.a)("".concat(P||""))}return Object(q.jsxs)(ot,Object(s.a)(Object(s.a)({},S),{},{"aria-label":"Clyde interpreter",children:[Object(q.jsx)(Pe,{doc:t,currentBlock:o,timeline:r,shouldShowExtraMetadata:c,shouldShowDebugPane:l,singleBubblePresentation:u,setBlock:b,clearTimeline:g,showExtraMetadata:j,hideExtraMetadata:x,showDebugPane:p,hideDebugPane:f,enableSingleBubbleDialogue:O,disableSingleBubbleDialogue:v,addDialogueLine:h,dialogue:I,chooseOption:m,clearEvents:k}),Object(q.jsxs)(K,{direction:d,defaultSizes:[80,20],style:{height:"calc(100% - 40px)"},children:[!n&&i&&""!==i?Object(q.jsx)(Re,{dialogue:I,currentBlock:o,timeline:r,shouldShowExtraMetadata:c,singleBubblePresentation:u,setBlock:b,addDialogueLine:h,clearTimeline:g,chooseOption:m}):n?Object(q.jsx)(Se,{style:{backgroundColor:"#eeefef"},children:n}):Object(q.jsx)(we,{children:"Nothing to show."}),l?Object(q.jsx)(Ye,{events:w,hideDebugPane:f}):void 0]})]}))}var ct,lt=$.a.div(Qe||(Qe=Object(l.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n"]))),st=$.a.div(Xe||(Xe=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  min-width: 500px;\n  min-height: 300px;\n  color: #333;\n  padding: 10px;\n"]))),dt=$.a.div(et||(et=Object(l.a)(["\n  margin-bottom: 10px;\n  padding-bottom: 10px;\n  text-align: center;\n  border-bottom: 1px solid #ccc;\n"]))),ut=$.a.div(tt||(tt=Object(l.a)(["\n  text-align: right;\n"]))),bt=$.a.div(nt||(nt=Object(l.a)(["\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n"]))),ht=$.a.button(it||(it=Object(l.a)(["\n  background-color: #fff;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  padding: 8px 12px;\n\n  &:focus, &:hover {\n    background-color: #f1f1f1;\n  }\n"])));function gt(e){var t=e.title,n=e.actions,i=e.children;return Object(q.jsx)(lt,{children:Object(q.jsxs)(st,{children:[Object(q.jsx)(dt,{children:t}),Object(q.jsx)(bt,{children:i}),Object(q.jsx)(ut,{children:n.map((function(e,t){return Object(q.jsx)(ht,{onClick:e.onClick,children:e.label},t)}))})]})})}var jt,xt,pt,ft=$.a.div(ct||(ct=Object(l.a)(['\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 4px 10px;\n\n  > input {\n    margin-right: 10px;\n  }\n\n  > select, > input[type="number"] {\n    margin-left: 10px;\n  }\n'])));function Ot(e){var t=e.onCloseClick,n=e.updatePreference,i=e.preferences,a=function(e){n(e.target.name,e.target.checked)},o=function(e){n(e.target.name,Number(e.target.value))};return Object(q.jsxs)(gt,{title:"Editor preferences",actions:[{label:"Close",onClick:function(){return t()}}],children:[Object(q.jsxs)(ft,{children:[Object(q.jsx)("input",{type:"checkBox",name:"highlightActiveLine",onChange:a,checked:i.highlightActiveLine}),Object(q.jsx)("label",{htmlFor:"highlightActiveLine",children:"Highlight active line"})]}),Object(q.jsxs)(ft,{children:[Object(q.jsx)("input",{type:"checkBox",name:"showInvisibles",onChange:a,checked:i.showInvisibles}),Object(q.jsx)("label",{htmlFor:"showInvisibles",children:"Show invisibles"})]}),Object(q.jsxs)(ft,{children:[Object(q.jsx)("input",{type:"checkBox",name:"vimMode",onChange:a,checked:i.vimMode}),Object(q.jsx)("label",{htmlFor:"vimMode",children:"Enable vim mode"})]}),Object(q.jsxs)(ft,{children:[Object(q.jsx)("input",{type:"checkBox",name:"lineWrap",onChange:a,checked:i.lineWrap}),Object(q.jsx)("label",{htmlFor:"line_wrap",children:"Enable line wrap"})]}),Object(q.jsxs)(ft,{children:[Object(q.jsx)("input",{type:"checkBox",name:"scrollPastEnd",onChange:a,checked:i.scrollPastEnd}),Object(q.jsx)("label",{htmlFor:"scrollPastEnd"})," Enable scroll past end"]}),Object(q.jsxs)(ft,{children:[Object(q.jsx)("input",{type:"checkBox",name:"useSoftTabs",onChange:a,checked:i.useSoftTabs}),Object(q.jsx)("label",{htmlFor:"useSoftTabs",children:"Enable soft tabs"})]}),Object(q.jsxs)(ft,{children:[Object(q.jsx)("label",{htmlFor:"tabSize",children:"Tab size"}),Object(q.jsx)("input",{type:"number",name:"tabSize",max:"10",min:"1",onChange:o,value:i.tabSize})]}),Object(q.jsxs)(ft,{children:[Object(q.jsx)("label",{htmlFor:"fontSize",children:"Font size"}),Object(q.jsx)("input",{type:"number",name:"fontSize",max:"70",min:"1",onChange:o,value:i.fontSize}),"px"]}),Object(q.jsxs)(ft,{children:[Object(q.jsx)("label",{htmlFor:"theme",children:"Theme"}),Object(q.jsx)("select",{name:"theme",value:i.theme,onChange:function(e){n(e.target.name,e.target.value)},children:[{value:"dracula",name:"Dracula"},{value:"monokai",name:"Monokai"},{value:"tomorrow_night_eighties",name:"Tomorrow Night Eighties"},{value:"tomorrow",name:"Tomorrow"},{value:"textmate",name:"Textmate"}].map((function(e,t){return Object(q.jsx)("option",{value:e.value,children:e.name},t)}))})]})]})}var vt=$.a.div(jt||(jt=Object(l.a)(["\n  height: 100%;\n  max-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n"]))),mt=$.a.div(xt||(xt=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  height: 40px;\n  font-size: 1.5em;\n  color: #444;\n  padding-left: 10px;\n  align-items: center;\n"]))),yt=$.a.span(pt||(pt=Object(l.a)(["\n  cursor: pointer;\n  position: relative;\n"])));var kt=Object(u.b)((function(e,t){return Object(s.a)(Object(s.a)(Object(s.a)({},e.interfaceConfig),{},{editorDefaultValue:e.editor.currentValue,editorPreferences:e.editor.preferences},e.interpreter),t)}),(function(e){return{toggleEditor:function(t){e(x({state:t}))},toggleInterpreter:function(t){e(p({state:t}))},changeInterpreterSplitDirection:function(t){e(f({direction:t}))},setBlock:function(t){e(E(t))},addDialogueLine:function(t){e(D(t))},clearTimeline:function(){e(P())},showExtraMetadata:function(){e(C())},hideExtraMetadata:function(){e(B())},showDebugPane:function(){e(_())},hideDebugPane:function(){e(T())},enableSingleBubbleDialogue:function(){e(M())},disableSingleBubbleDialogue:function(){e(I())},chooseOption:function(t){e(z(t))},setDocumentContent:function(t){e(m(t))},notifyEvent:function(t){e(N(t))},clearEvents:function(){e(A())},updateEditorPreference:function(t,n){e(y({name:t,value:n}))}}}))((function(e){var t=e.isEditorEnabled,n=void 0===t||t,i=e.isInterpreterEnabled,o=void 0===i||i,r=e.toggleEditor,c=e.toggleInterpreter,l=e.interpreterSplitDirection,s=void 0===l?"vertical":l,d=e.changeInterpreterSplitDirection,u=e.editorDefaultValue,b=e.setDocumentContent,h=e.editorPreferences,g=e.updateEditorPreference,j=e.currentBlock,x=e.timeline,p=e.shouldShowExtraMetadata,f=e.shouldShowDebugPane,O=e.singleBubblePresentation,v=e.document,m=e.setBlock,y=e.addDialogueLine,k=e.clearTimeline,w=e.showExtraMetadata,S=e.hideExtraMetadata,E=e.showDebugPane,D=e.hideDebugPane,P=e.enableSingleBubbleDialogue,C=e.disableSingleBubbleDialogue,B=e.chooseOption,_=e.events,T=e.notifyEvent,M=e.clearEvents,I=Object(a.useState)(!1),z=Object(W.a)(I,2),N=z[0],A=z[1],L=Object(a.useState)(!1),V=Object(W.a)(L,2),G=V[0],H=V[1],R=function(){A(!N)};return Object(q.jsxs)(vt,{children:[Object(q.jsx)(mt,{children:Object(q.jsxs)(yt,{children:[Object(q.jsx)(Z.a,{icon:U.c,onClick:R,"aria-label":"Toggle settings menu"}),N?Object(q.jsxs)(ee,{onClick:R,children:[Object(q.jsx)(te,{label:"Change split direction",onClick:function(){d("vertical"===s?"horizontal":"vertical")},icon:U.d,text:"Split mode: ".concat(s)}),o?Object(q.jsx)(te,{label:"Toggle editor",onClick:function(){return r(!n)},icon:U.b,text:"".concat(n?"Hide":"Show"," editor")}):void 0,n?Object(q.jsx)(te,{label:"Toggle interpreter",onClick:function(){return c(!o)},icon:U.g,text:"".concat(o?"Hide":"Show"," interpreter")}):void 0,Object(q.jsx)(te,{label:"Editor preferences",onClick:function(){H(!0)},icon:U.m,text:"Editor preferences"})]}):""]})}),Object(q.jsxs)(K,{direction:s,defaultSizes:[50,50],style:{height:"calc(100% - 40px)"},"aria-label":"Main panels",children:[n?Object(q.jsx)(ue,{defaultValue:u,setDocumentContent:b,notifyChange:y,preferences:h}):void 0,o?Object(q.jsx)(rt,{content:u,currentBlock:j,timeline:x,shouldShowExtraMetadata:p,shouldShowDebugPane:f,singleBubblePresentation:O,clydeDocument:v,setBlock:m,addDialogueLine:y,clearTimeline:k,showExtraMetadata:w,hideExtraMetadata:S,showDebugPane:E,hideDebugPane:D,enableSingleBubbleDialogue:P,disableSingleBubbleDialogue:C,chooseOption:B,events:_,notifyEvent:T,clearEvents:M}):void 0]}),G?Object(q.jsx)(Ot,{updatePreference:g,preferences:h,onCloseClick:function(){return H(!1)}}):void 0]})})),wt="clyde_editor_data",St=Object(d.a)({reducer:F,devTools:!1,preloadedState:function(){var e,t=function(){try{var e=localStorage.getItem(wt);if(null===e)return;return JSON.parse(e)}catch(t){return}}()||{editor:{}};return(null===(e=t.editor)||void 0===e?void 0:e.currentValue)||(t.editor.currentValue="--\n--\n-- This is a sample dialogue.\n--\n\nNarrator: Hello there!\nPlayer: Hi!\nNarrator: What do you want to talk about?\n  + [Life]\n    -> about life <-\n  + [The universe]\n    -> about the universe <-\n  * [Everything else... #some_tag]\n    -> about everything else <-\n  + [Earth]\n    -> about earth <-\n  + [Nothing]\n    -> goodbye <-\n\n\n== about life\nPlayer: I want to talk about life!\nNarrator: Well! That's complicated...\n<-\n\n\n== about the universe\nPlayer: I want to talk about the universe!\n( shuffle\n  - Narrator: That's too complex!\n  - Narrator: Maybe another time.\n  - Narrator: It's big...\n              I think that's all.\n)\n<-\n\n\n== about everything else\nPlayer: What about everything else?\nNarrator: I don't have time for this... #bored\n<-\n\n== about earth\nPlayer: What do you know about earth?\n( sequence\n - Narrator: It's mostly harmless.\n - Narrator: This again?\n             I've already told you, mostly harmless.\n -\n   Narrator: Why do you want to know so much about it?\n   Player: I don't know...\n   Narrator: So.. don't ask!\n\n - Narrator: I'm not talking about this anymore.\n)\n<-\n\n== goodbye\n{ not alreadyIntroduced }\n  Narrator: It was nice to meet you!\n  Player: I can say the same. See you around!\n  { set alreadyIntroduced = true }\nPlayer: Bye!\nNarrator: Good bye!\n"),{editor:t.editor,interpreter:Object(s.a)({document:void 0,events:[],timeline:[]},t.interpreter)}}()});St.subscribe(h()((function(){var e=St.getState(),t=e.interpreter,n=t.shouldShowExtraMetadata,i=t.shouldShowDebugPane,a=t.debugPaneDirection,o=t.singleBubblePresentation;!function(e){try{localStorage.setItem(wt,JSON.stringify(e))}catch(t){}}({editor:{preferences:e.editor.preferences,currentValue:e.editor.currentValue},interpreter:{shouldShowExtraMetadata:n,shouldShowDebugPane:i,debugPaneDirection:a,singleBubblePresentation:o}})}),1e3));var Et,Dt,Pt,Ct,Bt=function(){return Object(q.jsx)(u.a,{store:St,children:Object(q.jsx)(kt,{})})},_t=$.a.div(Et||(Et=Object(l.a)(["\n  height: 100%;\n  max-height: 100vh;\n  max-width: 1200px;\n  display: flex;\n  flex-direction: column;\n  padding: 10px 5px;\n  margin: 0 auto;\n"]))),Tt=$.a.h1(Dt||(Dt=Object(l.a)(["\n  font-size: 2em;\n  font-weight: 500;\n"]))),Mt=$.a.div(Pt||(Pt=Object(l.a)(["\n  font-family: 'Lato', sans-serif;\n  margin: 10px 40px;\n  p {\n    margin-bottom: 10px;\n  }\n\n  a {\n    margin: 5px 10px;\n  }\n"]))),It=$.a.div(Ct||(Ct=Object(l.a)(["\n  margin-top: 30px;\n"])));function zt(){return Object(q.jsxs)(_t,{children:[Object(q.jsxs)(Mt,{children:[Object(q.jsx)(Tt,{children:"Clyde Dialogue Language"}),Object(q.jsx)(It,{children:Object(q.jsxs)("p",{children:["Clyde is a language for writing dialogues.",Object(q.jsx)("a",{href:"https://github.com/viniciusgerevini/clyde",children:"Github"}),Object(q.jsx)("a",{href:"https://github.com/viniciusgerevini/clyde/blob/master/LANGUAGE.md",children:"Language Docs"}),Object(q.jsx)("a",{href:"https://github.com/viniciusgerevini/clyde/tree/master/cli",children:"CLI"}),Object(q.jsx)("a",{href:"https://github.com/viniciusgerevini/godot-clyde-dialogue",children:"Godot Plugin"})]})})]}),Object(q.jsx)(Bt,{})]})}c.a.render(Object(q.jsx)(o.a.StrictMode,{children:Object(q.jsx)(zt,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.f4f4a484.chunk.js.map